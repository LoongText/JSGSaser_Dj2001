<!doctype html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang=""> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8" lang=""> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9" lang=""> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="en">
{% load static %}
<!--<![endif]-->

{% include 'common/header.html' %}
<body>
{% include 'common/left_panel.html' %}

<!-- Right Panel -->

<div id="right-panel" class="right-panel">

    {% include 'common/right_panel_header.html' %}

    <div class="breadcrumbs">
        <div class="col-sm-4">
            <div class="page-header float-left">
                <div class="page-title">
                    <div class="icon-container">
                        <a href="{% url 'back:user' %}"><span class="ti-back-right"></span><span
                                class="icon-name"></span></a>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-sm-8">
            <div class="page-header float-right">
                <div class="page-title">
                    <ol class="breadcrumb text-right">
                        {#                        <li><a href="#">仪表板</a></li>#}
                        <li><a href="#">数据管理</a></li>
                        <li class="active">用户信息</li>
                    </ol>
                </div>
            </div>
        </div>
    </div>

    <div class="content mt-3">
        <div class="animated fadeIn">
            <div class="row">
                <div class="col-lg-8" style="margin:0 auto;">
                    <div class="card">
                        <div class="card-header">
                            <strong>用户信息编辑</strong>
                        </div>
                        <div class="card-body card-block">
                            {#                            <form action="{% url 'back:user_ed' %}" method="post" enctype="multipart/form-data"#}
                            <form enctype="multipart/form-data" class="form-horizontal" id="user-edit-form">
                                {% csrf_token %}
                                <input type="text" name="uuid" hidden value="{{ data.id }}">
                                <div class="row form-group">
                                    <div class="col col-md-3"><label for="text-input"
                                                                     class=" form-control-label"><i
                                            style="color: red; margin-right: 5px">*</i>用户名</label></div>
                                    <div class="col-12 col-md-9"><input type="text" id="text-input" name="username"
                                                                        required="required" readonly
                                                                        value="{{ data.username }}"
                                                                        class="form-control">
                                    </div>
                                </div>
                                <div class="row form-group">
                                    <div class="col col-md-3"><label for="text-input"
                                                                     class=" form-control-label"><i
                                            style="color: red; margin-right: 5px">*</i>认证机构</label></div>
                                    <div class="col-12 col-md-9">
                                        <input type="text" name="org_uuid" id="user-org-rzjg-uuid" hidden value="{{ data.org__uuid }}">
                                        <input type="text" id="user-org-rzjg" name="org" value="{{ data.org__name }}"
                                               class="form-control" required="required"
                                               placeholder="请选择认证机构"
                                               onkeyup="user_org_select()"
                                               style="display: inline-block;width: 70%"
                                               autocomplete="off">
                                        <a href="{% url 'back:org_add' %}">
                                            <button class="btn btn-success btn-sm" type="button">
                                                添加机构
                                            </button>
                                        </a>
                                        <div style="position: relative; width: 100%">
                                            <div id="org-rzjg-tj"></div>
                                        </div>
                                        <small class="form-text text-muted">* 输入后，必须选择一个机构</small>
                                    </div>

                                </div>
                                <div class="row form-group">
                                    <div class="col col-md-3"><label for="text-input"
                                                                     class=" form-control-label">昵称</label></div>
                                    <div class="col-12 col-md-9"><input type="text" id="text-input" name="first_name"
                                                                        value="{{ data.first_name }}"
                                                                        class="form-control">
                                    </div>
                                </div>
{#                                {% if is_manage == 1 %}#}
                                <div class="row form-group" id="user_is_manage">
                                    <div class="col col-md-3"><label class=" form-control-label"><i
                                            style="color: red; margin-right: 5px">*</i>管理员</label></div>
                                    <div class="col col-md-9">
                                        <div class="form-check-inline form-check" id="is_manage-inline-radio">
                                            <label for="inline-radio1" class="form-check-label ">
                                                <input type="radio" id="inline-radio1" name="is_manage"
                                                       value="1" class="form-check-input">是
                                            </label>
                                            <label for="inline-radio2" class="form-check-label ">
                                                <input type="radio" id="inline-radio2" name="is_manage"
                                                       value="0" class="form-check-input" checked>否
                                            </label>
                                        </div>
                                    </div>
                                </div>
                                <div class="row form-group" id="user_is_active">
                                    <div class="col col-md-3"><label for="text-input"
                                                                     class=" form-control-label">是否可用</label></div>
                                    <div class="col col-md-9">
                                        <div class="form-check-inline form-check" id="is_active-inline-radio">
                                            <label for="inline-radio1" class="form-check-label ">
                                                <input type="radio" name="is_active"
                                                       value="True" class="form-check-input" checked>是
                                            </label>
                                            <label for="inline-radio2" class="form-check-label ">
                                                <input type="radio" name="is_active"
                                                       value="False" class="form-check-input">否
                                            </label>
                                        </div>
                                    </div>
                                </div>
{#                                {% endif %}#}
                                <div style="margin-top:40px;margin-bottom:20px;">
                                    <button type="button" class="btn btn-primary btn-sm"
                                            style="width: 100px;display:block;margin:0 auto;" onclick="user_edit_bt()">
                                        <i class="fa fa-dot-circle-o"></i> 修改
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div><!-- .animated -->
    </div><!-- .content -->
</div><!-- /#right-panel -->
<!-- Right Panel -->

{% include 'common/include_js.html' %}
{% block add_js %}
    <script src="{% static 'backstage/vendors/jquery-validation/dist/jquery.validate.min.js' %}"></script>
    <script src="{% static 'backstage/js/back.js' %}"></script>
{% endblock %}
</body>
<script>
    // 默认选中性别
    var is_active = '{{ data.is_active }}';
    var is_manage = '{{ is_manage }}';
    var user_level = '{{ user_level }}';
    {#console.log('111---' + is_active);#}
    {#console.log('222---' + is_manage);#}
    $(window).load(function () {
        if(Number(user_level)===0){
            $('#user_is_manage').attr("hidden", "hidden");
            $('#user_is_active').attr("hidden", "hidden");
        }
        $('#is_active-inline-radio label').each(function () {
            if ($(this).children('input').attr('value') == is_active) {
                $(this).children('input').attr("checked", "checked");
            }

        });
        $('#is_manage-inline-radio label').each(function () {
            if ($(this).children('input').attr('value') == is_manage) {
                $(this).children('input').attr("checked", "checked");
            }
        })
    });
</script>
</html>
